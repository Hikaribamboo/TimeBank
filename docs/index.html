<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeBank</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>
<body>
    <header>
        <h1 id="logo">TimeBank</h1>
    </header>
<main>
    <section id="today-tasks">
        <h2>
            ãƒœãƒƒã‚¯ã‚¹ï¼‘
            <button class="edit-title-button" onclick="editTitle('today-tasks')">
                <i class="fas fa-edit"></i>
            </button>            
        </h2>
        <ul id="today-task-list">
            <!-- ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ãŒã“ã“ã«è¿½åŠ ã•ã‚Œã‚‹ -->
        </ul>
        <button class="task-create-button" onclick="showTaskForm('today')">ï¼‹ ã‚¿ã‚¹ã‚¯ä½œæˆ</button>
    </section>
    
    <section id="long-term-tasks">
        <h2>
            ãƒœãƒƒã‚¯ã‚¹ï¼’
            <button class="edit-title-button" onclick="editTitle('long-term-tasks')">
                <i class="fas fa-edit"></i>
            </button>            
        </h2>
        <ul id="long-term-task-list">
            <!-- é•·æœŸã®ã‚¿ã‚¹ã‚¯ãŒã“ã“ã«è¿½åŠ ã•ã‚Œã‚‹ -->
        </ul>
        <button class="task-create-button" onclick="showTaskForm('long_term')">ï¼‹ ã‚¿ã‚¹ã‚¯ä½œæˆ</button>
    </section>
</main>  

<!-- ã‚¿ã‚¹ã‚¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ -->
<template id="task-template">
    <li class="task-item" draggable="true">
        <span class="task-title"></span>
        <span class="progress-percent"></span>
        <div class="progress-bar-wrapper"></div>
        
        <button class="delete-button"></button>
    </li>
</template>

<!-- å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="delete-confirm-modal" class="modal hidden">
    <div class="modal-content">
        <h3 id="center">å‰Šé™¤ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ</h3>
        <button class="button-nomal green" id="confirm-yes">ã¯ã„</button>
        <button class="button-nomal red" id="confirm-no">ã„ã„ãˆ</button>
    </div>
</div>

<div id="task-form-container" class="modal hidden">
    <div id="task-form" class="modal-content">
        <h3>ã‚¿ã‚¹ã‚¯ä½œæˆ</h3>
        <label for="task-title">ã‚¿ã‚¹ã‚¯å</label>
        <input type="text" id="task-title" required>

        <label for="task-duration">ç›®æ¨™æ™‚é–“ã®è¨­å®š</label>
        <input type="number" id="target-time" name="target-time" value="0" min="0" step="1">

        <label for="task-deadline">æœŸé™ã®è¨­å®š</label>
        <input type="date" id="task-deadline">

        <script>
            // ä»Šæ—¥ã®æ—¥ä»˜ã‚’å–å¾—
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0'); // æœˆã¯0ã‹ã‚‰å§‹ã¾ã‚‹ãŸã‚+1
            const dd = String(today.getDate()).padStart(2, '0'); // æ—¥ä»˜ã‚’2æ¡ã«

            const minDate = `${yyyy}-${mm}-${dd}`; // "YYYY-MM-DD"å½¢å¼ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

            // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æœ€å°æ—¥ä»˜ã‚’è¨­å®š
            const taskDeadlineInput = document.getElementById('task-deadline');
            taskDeadlineInput.setAttribute('min', minDate);
        </script>

        <style>
            /* ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã®å…¨ä½“çš„ãªå¤§ãã•ã‚’èª¿æ•´ */
            input[type="number"]::-webkit-inner-spin-button,
            input[type="number"]::-webkit-outer-spin-button {
                opacity: 1; /* å¸¸ã«è¡¨ç¤º */
                width: 30px; /* å¹…ã‚’å¤‰æ›´ */
                height: 30px; /* é«˜ã•ã‚’å¤‰æ›´ */
            }

        </style>
        
        <!-- ãƒœã‚¿ãƒ³ã‚’ã¾ã¨ã‚ã‚‹ãŸã‚ã®ãƒ©ãƒƒãƒ‘ãƒ¼ -->
        <div class="next-container">
            <button class="button-nomal red" id="cancel-button2">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button class="button-nomal green" id="add-task-button" onclick="addTask()">ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ </button>
        </div>
    </div>
</div>

<!-- è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="task-details-modal" class="modal hidden">
    <div class="modal-content">
        <button id="close-button">Ã—</button>
        <h3>ã‚¿ã‚¹ã‚¯ã®è©³ç´°</h3>
        <form id="task-details-form">
            
            <label for="task-title">ã‚¿ã‚¤ãƒˆãƒ«</label>
            <input type="text" id="task-title" name="title">
            
            <label for="task-duration">ç›®æ¨™æ™‚é–“</label>
            <input type="number" id="task-duration" name="duration">

            <label for="task-deadline">æœŸé™</label>
            <input type="date" id="task-deadline" name="deadline">
            
            <label>è¨˜éŒ²ã™ã‚‹</label>
            <div class="time-input">
                <input type="number" id="hours" name="hours" min="0" max="24" placeholder="æ™‚é–“">
                <input type="number" id="minutes" name="minutes" min="0" max="55" step="5" placeholder="åˆ†">
                <button type="button" class="button-nomal green" id="save-record" onclick="saveTaskDetails()">é€ä¿¡</button>
            </div>

            <div class="next-container">
                <button type="button" class=" button-nomal" id="set-timer">ã‚¿ã‚¤ãƒãƒ¼</button>
                <button type="button" class=" button-nomal" id="set-stopwatch">ã‚¹ãƒˆãƒƒãƒ—ã‚¦ã‚©ãƒƒãƒ</button>
            </div>
        </form>
    </div>
</div>

<!-- ã‚¹ãƒˆãƒƒãƒ—ã‚¦ã‚©ãƒƒãƒç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="confirm-modal" class="modal hidden">
    <div class="modal-content">
        <h3 id="center">ã‚¹ãƒˆãƒƒãƒ—ã‚¦ã‚©ãƒƒãƒã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ</h3>
        <div class="next-container">
            <button class="button-nomal green" id="confirm-yes">ã¯ã„</button>
            <button class="button-nomal red" id="confirm-no">ã„ã„ãˆ</button>
        </div>
    </div>
</div>

<!-- ã‚¿ã‚¤ãƒãƒ¼è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="timer-setup-modal" class="modal hidden">
    <div class="modal-content">
        <h3>ã‚¿ã‚¤ãƒãƒ¼è¨­å®š</h3>
        <label for="timer-hours">æ™‚é–“:</label>
        <input type="number" id="timer-hours" min="0" max="23" placeholder="0">
        
        <label for="timer-minutes">åˆ†:</label>
        <input type="number" id="timer-minutes" min="0" max="59" placeholder="0">
        
        <button class="button-nomal green" id="start-timer-button">é–‹å§‹</button>
        <button class="button-nomal red" id="cancel-button">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
</div>

<!-- é”æˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="congrats-modal" class="modal hidden">
    <div class="modal-content">
        <h4 id="center">ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ğŸ‰</h4>
        <p id="center">ã‚¿ã‚¹ã‚¯ã‚’é”æˆã—ã¾ã—ãŸï¼</p>
        <form id="task-update-form">
            <h3>æ–°ã—ã„ç›®æ¨™æ™‚é–“ã‚’è¨­å®šã—ã¾ã™ã‹ï¼Ÿ</h3>
            <input type="number" id="new-duration" name="new-duration" value="0" min="0" step="1">

            <label for="new-deadline">æœŸé™:</label>
            <input type="date" id="new-deadline" name="new-deadline">

            <button type="button" class="button-nomal green" id="update-button">é€ä¿¡</button>
        </form>
        <button class="button-nomal" id="close-button2">æ¬¡ã¸</button>
    </div>
</div>

<div>
    <div id="badge-message" class="hidden">
        <p>ã‚ãªãŸã¯ã“ã®ã‚¿ã‚¹ã‚¯ã§ãƒãƒƒã‚¸ã‚’ç²å¾—ã—ã¾ã—ãŸï¼</p>
    </div>
</div>

<div id="achievement-badges">
    <h5>Badge Collections</h5>
    <!-- ãƒãƒƒã‚¸ã®è¡¨ç¤ºå ´æ‰€ -->
    <div>
        <p>(ä¾‹)</p>
        <div id="example-badge" class="badge">
            <p>é­šé‡£ã‚Š</p>
            <h1>250h</h1>
            <p>12/01</p>
        </div>
    </div>
    <div id="badges-container"></div>
</div>

    <!-- ã‚µã‚¦ãƒ³ãƒ‰ -->
    <audio id="celebration-sound" src="./other/éŸ³å£°/å¯æ„›ãè¼ã1.mp3"></audio>
    <audio id="timer-end-sound" src="./other/éŸ³å£°/æ±ºå®šãƒœã‚¿ãƒ³ã‚’æŠ¼ã™37.mp3"></audio>

    <script type="module" src="./js/tasks.js"></script>
    <script type="module" src="./js/timer.js"></script>
    <script type="module" src="./js/drag.js"></script>
</body>
</html>



